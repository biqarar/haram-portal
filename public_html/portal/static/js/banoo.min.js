/** In the name Of Allah
 * Banoo 
 * @author ahmad karimi, reza mohiti, baravak
 * @version 0.1.0 2016-08-01
 */

function persian_nu(a,b){a=a.toString();var c=Array("۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"),d=Array("0","1","2","3","4","5","6","7","8","9");return a=b?a.replace(/[۱۲۳۴۵۶۷۸۹۰]/gi,function(){return c.indexOf(arguments[0])}):a.replace(/\d/gi,function(){return c[d.indexOf(arguments[0])]}),/^\d+$/.test(a)&&(a=parseInt(a)),a}function xhr_text(b,c){text="";for(a in b[c])"string"==typeof b[c][a]&&(text+=b[c][a]+", ");return text}function xhr_result(a){1==a.status&&xhr_true(xhr_text(a,"true")),0==a.status&&xhr_error(xhr_text(a,"fatal")),2==a.status&&xhr_warn(xhr_text(a,"warn"))}function dTable_each(){var a=this,b=$(this).attr("data-table-url"),c=Math.random().toString().replace(/^\d\./,"");$(this).on("draw.dt",function(){$(".dataTables_info").persian_nu(),$(".dataTables_paginate a").persian_nu();var c=$("select[aria-controls^='DataTables_Table']");c.persian_nu(),c.selectmenu("instance")&&c.selectmenu("destroy"),readyState($(a)),$(a).sroute(b)}).dataTable({processing:!0,serverSide:!0,ajax:{url:b+"session="+c,type:"POST"},language:{processing:"درحال بارگذاری",search:"جستجو:",lengthMenu:"مقدار _MENU_ سطر",info:"مقدار _START_ تا _END_ از _TOTAL_ سطر",infoEmpty:"هیچ سطری یافت نشد",infoFiltered:"(مقدار _MAX_ بدون فیلتر)",infoPostFix:"",loadingRecords:"درحال بارگذاری...",zeroRecords:"هیچ سطری یافت نشد",emptyTable:"هیچ سطری یافت نشد",paginate:{first:"نخست",previous:"قبلی",next:"بعدی",last:"آخرین"},aria:{sortAscending:": مرتب سازی صعودی",sortDescending:": مرتب سازی نزولی"}},order:[[0,"asc"]],lengthMenu:[[10,25,50,100,500],[10,25,50,100,500]],createdRow:function(a,b,c){$(a).data("copire-data",b),$("*",a).persian_nu()}})}function tabClose(){var a=$(this).closest("li").fadeOut("fast",function(){$(this).remove()}).attr("aria-controls");$("#"+a).fadeOut("fast",function(){$(this).sremovecontextmenu(),$(this).remove(),$("#tabs").tabs("refresh")})}function addTab(a,b,c){var d=$("<li><a href='"+a+"'>"+b+"</a></li>");d.persian_nu(),$("#tabs").find(".ui-tabs-nav").append(d),c&&d.addClass("deactive-tab").addClass("ui-state-default"),c||$("#tabs").tabs("refresh"),setTabLI(d)}function setTabLI(a){var b=a.find("a");b.outerWidth()!==b[0].scrollWidth?a.addClass("dot3"):a.removeClass("dot3"),$(".ui-icon-close",a).length<1&&(a.append('<span class="ui-icon ui-icon-close" role="presentation"></span>'),a.click(function(a){2==a.which&&($("span.ui-icon-close",this).trigger("click"),tabClose.call($("span.ui-icon-close",this)))}));var c=a.text();c=c.replace(/^\s*/,""),c=c.replace(/\s*$/,""),a.attr("title",c)}function aClickTabs(a){var b,c,d,e=$(this).attr("href"),f=$(this).text();if(!e)return!1;"_blank"==$(this).attr("target")&&(c=!0);var g=a.button||c||a.ctrlKey;if(g)addTab(e,f),b=$("#tabs .ui-tabs-nav > li").size()-1,d=$("#tabs>ul>li").eq(b).attr("aria-controls");else{b=$("#tabs").tabs("option","active");var h=$("#tabs>ul>li").eq(b).removeClass("loadContentAjax");d=$("#tabs>ul>li").eq(b).attr("aria-controls"),h.find("a").attr("href",e)}return g?$("#tabs").tabs({active:b}):($("#tabs").tabs("load",b),sls_pushState(null,f,e+"#"+d)),!1}function sls_pushState(a,b,c){history.pushState(a,b,c)}function parseCondition(a){for(var b=new Object,c=a.split(";"),d=0;d<c.length;d++){var e=c[d].split(":");b[e[0]]=e[1]}return b}function certification_api_change(a,b){$.ajax({type:"POST",url:"certification/apichange/certificationid="+a+"/type="+b,success:function(a){xhr_result(a)}})}function courseclasses_list(b){$("#courseclasses-list").html(""),$("#courseclasses-list").val("");for(a in b.msg)b.msg[a].planname&&$('<span class="courseclasses-item"><a  href="classification/class/classesid='+b.msg[a].classes_id+'" courseid ="'+b.msg[a].course_id+'" target="_blank">'+b.msg[a].planname+"  استاد "+b.msg[a].teacherName+" "+b.msg[a].teacherFamily+'</a><a class="icoredclose" title="حذف این کلاس از دوره" style="display:inline-block; cursor:pointer" classesid="'+b.msg[a].classes_id+'" courseid ="'+b.msg[a].course_id+'"></a></span>').appendTo("#courseclasses-list");$(".courseclasses-item .icoredclose").click(function(){delete_courseclasses($(this)),$(this).parents(".courseclasses-item").fadeOut(function(){})})}function delete_courseclasses(a){courseclassesid=a.attr("courseclassesid"),course_id=a.attr("courseid"),classes_id=a.attr("classesid"),$.ajax({type:"POST",url:"course/courseclasses/apidelete/courseid="+course_id+"/classesid="+classes_id,success:function(a){courseclasses_list(a)}})}function none_display_hefz_group(a){$("#hefz_group",a).combobox().next("span").css("display","none"),$("label[for=hefz_group]").css("display","none")}function inline_block_display_hefz_group(a){$("#hefz_group",a).css("display","none").next("span").css("display","inline-block"),$("label[for=hefz_group]").css("display","inline-block").html("گروه")}function hefz_result(b,c){$.ajax({type:"POST",url:"hefzlig/racing/status=resultapi/raceid="+b,success:function(b){for(a in b.msg.result)$("#race-result-value-"+a).html(persian_nu(b.msg.result[a].value)),$("#race-result-result-"+a).html(persian_nu(b.msg.result[a].result)),$("#race-result-rate-"+a).html(persian_nu(b.msg.result[a].rate)),$("#race-result-manfi-"+a).html(persian_nu(b.msg.result[a].manfi))}})}function branch_list(b){$("#branch_id").html(""),$("#branch_id").val("");for(a in b.msg.list)x=b.msg.list[a],x.name&&$('<option type="text" name="'+x.name+'" value="'+x.branch_id+'" selected="selected" placeholder="'+x.name+'" id="'+x.name+'">'+x.name+"</option>").appendTo("#branch_id")}function apichangeusersbranch(a,b){xhr_true("لطفا کمی صبر کنید"),$.ajax({type:"POST",url:"branch/status=apiaddbranch/usersid="+b+"/branchid="+a,success:function(a){xhr_result(a)}})}function convertDate(a){return a.test(/^(\d{4})(\-|\/|)(\d{1,2})(\-|\/|)(\d{1,2})$/)?(a=a.split("-"),4==a[0].length&&(y=a[0]),2!=a[1].length&&(m="0"+a[1]),2!=a[2].length&&(d="0"+a[2]),y+""+m+d):data}function mkData(){var a=new Object;return a.names=Array(),a.values=Array(),$(this).find("select, input, button, textarea").each(function(){var b=!1,c=this.name;"_post"!=c&&(b=$(this).is(":radio, :checkbox")?!!$(this).is(":checked")&&this.value:this.value,b!==!1&&0!=c&&("lists"==c?a.lists=b:(a.names.push(c),a.values.push(b))))}),a}function insert_(a){x=$("#calculation").html(),$("#calculation").html(x+"="+$(a).html()+"=")}function users_branch_change(a,b){"operator"!=a&&"student"!=a&&"teacher"!=a||$(".users-branch-type[usersbranchid="+b+"]").fadeOut(10),"waiting"!=a&&"enable"!=a&&"block"!=a&&"delete"!=a||$(".users-branch-status[usersbranchid="+b+"]").fadeOut(10),$.ajax({type:"POST",url:"branch/apichange/usersbranchid="+b+"/type="+a,success:function(a){xhr_result(a)}}),"teacher"==a&&(xtype="استاد"),"student"==a&&(xtype="فراگیر"),"operator"==a&&(xtype="پرسنل"),"waiting"==a&&(xtype="در حال انتظار"),"enable"==a&&(xtype="فعال"),"block"==a&&(xtype="قفل شده"),"delete"==a&&(xtype="حذف"),"operator"!=a&&"student"!=a&&"teacher"!=a||$(".users-branch-type[usersbranchid="+b+"]").attr("vtext",xtype).html(xtype).val(xtype).fadeIn(1e3),"waiting"!=a&&"enable"!=a&&"block"!=a&&"delete"!=a||$(".users-branch-status[usersbranchid="+b+"]").attr("vtext",xtype).html(xtype).val(xtype).fadeIn(1e3)}!function(a){a.fn.sautocomplate=function(){a(this).each(function(){var b=a(this).attr("data-url");if(b){var c=a(this).clone().removeAttr("id").removeAttr("name").attr("sautocomplate-for",a(this).attr("id")||a(this).attr("name")),d=this;a(this).after(c),a(this).hide(),c.autocomplete({source:function(c,d){a.ajax({url:b+"search="+c.term,dataType:"json",type:"post",success:function(a){return d(a.msg.list),!1}})},select:function(b,c){return a(d).val(c.item.id),this.value=c.item.label,!1},focus:function(a,b){return d.value=b.item.value,this.value=b.item.label,!1},minLength:1})}})}}(jQuery),function(a){a.widget("custom.combobox",{options:{change:!1,create:!1},_create:function(){this.element.addClass("notselect"),this.wrapper=a("<span>").addClass("custom-combobox").insertAfter(this.element),this.element.addClass("orginal-combo-box"),this.element.hide(),this._createAutocomplete(),this._createShowAllButton()},_createAutocomplete:function(){var b=this.element.children(":selected");value=b.val()?b.text():"",this.input=a("<input>").appendTo(this.wrapper).val(value).attr("title","").addClass("custom-combobox-input").autocomplete({delay:0,minLength:0,source:a.proxy(this,"_source")}).tooltip({tooltipClass:"ui-state-highlight"}),this._on(this.input,{autocompleteselect:function(a,b){this.options.change&&this.options.change.call(this,b),b.item.option.selected=!0,this._trigger("select",a,{item:b.item.option})},autocompletechange:"_removeIfInvalid"})},_createShowAllButton:function(){var b=this.input,c=!1;a('<span class="ui-icon ui-icon-triangle-1-s"></span>').appendTo(this.wrapper).mousedown(function(){c=b.autocomplete("widget").is(":visible")}).click(function(){b.focus(),c||b.autocomplete("search","")})},_source:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(b.term),"i");c(this.element.children("option").map(function(){var c=a(this).text();if(this.value&&(!b.term||d.test(c)))return{label:c,value:c,option:this}}))},_removeIfInvalid:function(b,c){if(!c.item){var d=this.input.val(),e=d.toLowerCase(),f=!1;this.element.children("option").each(function(){if(a(this).text().toLowerCase()===e)return this.selected=f=!0,!1}),f||(this.input.val("").attr("title","«"+d+"» در لیست موجود نیست").tooltip("open"),this.element.val(""),this._delay(function(){this.input.tooltip("close").attr("title","")},2500),this.input.autocomplete("instance").term="")}},_destroy:function(){this.wrapper.remove(),this.element.show()}})}(jQuery),function(a){a.fn.persian_nu=function(b){a(this).each(function(){var c=Array("۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"),d=Array("0","1","2","3","4","5","6","7","8","9");for(n in a(this)[0].childNodes)if(!a(this).is(".notp")&&"#text"==a(this)[0].childNodes[n].nodeName){var e=a(this)[0].childNodes[n].textContent;if(b)var f=e.replace(/[۱۲۳۴۵۶۷۸۹۰]/gi,function(){return c.indexOf(arguments[0])});else var f=e.replace(/\d/gi,function(){return c[d.indexOf(arguments[0])]});a(this)[0].childNodes[n].textContent=f}})}}(jQuery),function(){function a(){var a,b,c=arguments;if(b=d.length++,"function"==typeof c[c.length-1]){a=c[c.length-1];for(var e=0;e<c.length-1;e++)d[b]||(d[b]=new Object,d[b].routes=new Array,d[b].fn=a),d[b].routes.push(c[e])}}function b(a,b){url=b[0];for(var e=0;e<d.length;e++){var f=d[e];for(var g in f.routes){var h=f.routes[g];"*"==h?c(a,f,b):"string"==typeof h&&h==url?c(a,f,b):"object"==typeof h&&h.test(url)&&c(a,f,b)}}}function c(a,b,c){var d=b.fn;d.apply(a,c)}var d=new Object;d.length=0,$(document).ready(function(){$(document).sroute()}),route=a,route_main=b}(),function(a){a.fn.sroute=function(b){var c=arguments;b=b?b:location.pathname,b=b.replace(/^\//,"").replace(/\/$/,""),c[0]=b,a(this).each(function(){route_main(this,c)})}}(jQuery),function(a){a.fn.sslider=function(){a(this).each(function(){var b=a(this);if(!a(this).next().is(".ui-sslider")){a(this).attr("placeholder","#");var c=parseInt(a(this).attr("max")),d=parseInt(a(this).attr("min")),e=a("<div></div>").addClass("ui-sslider");e.insertAfter(this).slider({value:parseInt(b.val())?parseInt(b.val()):0,slide:function(a,c){b.val(persian_nu(c.value))},max:c,min:d}),a(this).bind("keyup.sslider",function(a){var b=persian_nu(this.value,!0);e.slider("option","value",/^[\d]+$/.test(b)?parseInt(b):0)})}})}}(jQuery),function(a){function b(){f&&f.remove()}function c(){f&&f.fadeOut(50,b)}function d(){f.append("<li>عملگری وجود ندارد</li>")}function e(e){b();var i=a(this).data("copire-data"),j=a(this).attr("copier-context-subject"),k=h[j],l=a("<ul></ul>").addClass("copire-contextmenu");if(f=l,l.appendTo("body"),k)for(var m=0;m<k.length;m++)if(k[m]){var n=k[m],o=n.data("scontextmenu")[j],p=o.title.call(n),q=n.attr("id"),r=a("<li copier-aria-controls='"+q+"'>"+p+"</li>");a("#tabs").tabs("option","active");r.appendTo(l),r[0].tabNav=a("#tabs>ul>li[aria-controls="+q+"]"),r[0].tabPanel=a("#tabs>div#"+q),r.bind("click",function(){if(a("#tabs>ul>li").css({opacity:1}),o.click){var b=o.click.call(a(this)[0].tabPanel,a(this),i,j);b!==!1&&c()}}).hover(function(){a("#tabs>ul>li").css({opacity:.2}),a(this)[0].tabNav.css({opacity:1})},function(){a("#tabs>ul>li").css({opacity:1})})}0==a(l).children("*").length&&d(),l.fadeIn("fast"),l.bind("contextmenu",function(a){return!1}),l.bind("click",function(){g=!0}),l.css({top:e.pageY,left:e.pageX-l.outerWidth()})}var f,g=!1,h=new Object;a.fn.scopier=function(){a(this).unbind("contextmenu.scopier"),a(this).bind("contextmenu.scopier",function(a){return e.call(this,a),!1})},a.fn.sremovecontextmenu=function(){c(),a(this).data("scontextmenu",!1);for(var b in h)for(var d=0;d<h[b].length;d++)h[b][d]&&this[0]==h[b][d][0]&&delete h[b][d]},a.fn.scontextmenu=function(b){for(var c in b)h[c]||(h[c]=new Array),h[c].push(this);a(this).data("scontextmenu",b)},copiremenuehide=c,oncontextmenu=function(){a("[copier-context-subject]").scopier(),a(".slider-number").sslider(),a(this).each(function(){g||c(),g=!1})}}(jQuery),route("*",function(){$("*").unbind("click.scopier contextmenu.scopier"),$("*").bind("click.scopier contextmenu.scopier",oncontextmenu)}),function(){function a(a,b){var b="object"==typeof b?b:new Object;c?a.call():d.push(a),b.onState&&e.push(a.bind(!0))}function b(a){e.forEach(function(b){b(a)})}var c=!1,d=new Array,e=new Array;window.addEventListener("load",function(){c=!0,d.forEach(function(a){a()}),d=new Array}),ready=a,readyState=b}(),function(){function a(){b()}function b(){var a=h[0];$("#status-xhr")[0]?$("#status-xhr").attr("class","status-xhr-"+a.type).html(j+a.title):$('<div id="status-xhr" class="status-xhr-'+a.type+'">'+j+a.title+"</div>").appendTo("body"),h.shift(),0===h.length?setTimeout(function(){h.length?b():($("#status-xhr").remove(),i=!1)},1e3*g):setTimeout(b,1e3*g)}function c(b,c){h.push({title:b,type:c}),a()}function d(a){c(a,"error")}function e(a){c(a,"warn")}function f(a){c(a,"true")}var g=5,h=Array(),i=!1,j="";xhr_error=d,xhr_warn=e,xhr_true=f}(),route("*",function(){$(".dtable",this).each(dTable_each)}),function(a){a.fn.ajx=function(b){function c(){h.elements.each(function(){a(this).is("a")?(a(this).unbind("click.state"),a(this).unbind("click.ajx"),a(this).bind("click.ajx",function(){try{e({base:this,url:a(this).attr("href")})}catch(b){console.log(b.stack)}return!1})):a(this).is("form")&&(a(this).unbind("click.ajx"),a(this).bind("submit.ajx",function(){try{f({base:this,url:a(this).attr("action"),data:d.call(this)})}catch(b){console.log(b.stack)}return!1}))})}function d(){var b=new FormData;return a(this).find("select, input, button, textarea").each(function(){var c=!1,d=this.name;if(a(this).is(":file")){var e=a(this)[0].files;if(a(this).attr("multiple"))for(var f=0;f<e.length;f++)b.append(d+"[]",e[f]);else b.append(d,e[0])}else c=a(this).is(":radio, :checkbox")?!!a(this).is(":checked")&&this.value:this.value;c!==!1&&b.append(d,c)}),b}function e(c){function d(a){b.after&&b.after(a,c.base,"nav"),b.error&&b.error(a,c.base,"nav")}b.before&&b.before(c.base,"nav"),a.get(c.url,function(e){b.after&&b.after(arguments[2],c.base,"nav");var e;try{e=a.parseJSON(e),1===e.status?(b.success(e),g(e,c.base)):d(arguments[2])}catch(f){d(arguments[2])}}).error(d)}function f(c){function d(a){b.error&&b.error(a,c.base,"form")}b.before&&b.before(c.base,"form");var e=a('<span class="uploadPerload"></span>'),f=a(c.base).find(":submit:eq(0)");f.addClass("btn-default"),f.css({position:"relative",overflow:"hidden"}),e.appendTo(f);a.ajax({type:"POST",processData:!1,contentType:!1,xhr:function(){var b=a.ajaxSettings.xhr();return b&&b.upload.addEventListener("progress",function(b){var c=b.totalSize/1048576,d=b.position/1048576;d=100*d/c,e.css("width",d+"%"),a(".progress-bar").css("width",d+"%"),100==d&&(e.addClass("stateUPerlaod"),e.removeClass("uploadPerload"))},!1),b},url:c.url,data:c.data}).complete(function(e){if(b.after&&b.after(e,c.base,"form"),200==e.status)try{var f=a.parseJSON(e.responseText);1===f.status?b.success&&(b.success(f,c.base),g(f,c.base)):d(e,c.base)}catch(h){d(e,c.base)}}).error(function(a){d(a,c.base)})}function g(b,c){a(c).data("ajxCallBack")&&a(c).data("ajxCallBack").call(c,b)}var h=new Object;return h.elements=this,c(),h},a.fn.ajxCall=function(b){"function"==typeof b&&a(this).data("ajxCallBack",b)},a.fn.ajxOptions=function(b){a(this).data("ajxOptions",b)}}(jQuery);var O={before:function(a,b){if("form"==b)$(a).find("select, input, button, textarea").attr("disabled","disabled");else if("nav"==b){$("<span class='statePerlaod'></span>").appendTo($(a))}},after:function(a,b,c){"form"==c?($(b).find(".stateUPerlaod").remove(),$(b).find(".uploadPerload").remove(),$(b).find("select, input, button, textarea").removeAttr("disabled")):"nav"==c&&$(b).children(".statePerlaod").remove();var d=a.responseText;try{d=$.parseJSON(d)}catch(e){}if(d.msg&&d.msg.captcha){var f=$(b).find("img[src='captcha.png']");f.attr("src","captcha.png?cid"+Math.random())}},success:function(a,b){var c=$(b).parents(".ui-tabs-panel");(!$(b).data("ajxOptions")||$(b).data("ajxOptions")&&0!=$(b).data("ajxOptions").reset)&&$(b)[0].reset(),c.find(".submit-status").remove();var d=$('<div class="submit-status"></div>');d.insertAfter($(b));var e,f;for(e in a)if(/^(true|warn)$/i.test(e)){f=$('<ul class="submit-status-'+e+'"></ul>'),f.appendTo(d);for(cStatus in a[e])/^\d+$/.test(cStatus)&&("object"==typeof a[e][cStatus]?$("<li>"+a[e][cStatus].error+"</li>").appendTo(f):$("<li>"+a[e][cStatus]+"</li>").appendTo(f))}},error:function(a,b,c){if(0!=a.status){var d;try{d=$.parseJSON(a.responseText)}catch(e){d=a.responseText,console.error(d)}var f=$(b).parents(".ui-tabs-panel");f.find(".submit-status").remove();var g=$('<div class="submit-status"></div>');g.insertAfter($(b));var h,i;for(h in d)if(/^(fatal)$/i.test(h)){i=$('<ul class="submit-status-'+h+'"></ul>'),i.appendTo(g);for(cStatus in d[h])/^\d+$/.test(cStatus)&&("object"==typeof d[h][cStatus]?$("<li>"+d[h][cStatus].error+"</li>").appendTo(i):$("<li>"+d[h][cStatus]+"</li>").appendTo(i))}}}};ready(function(a){a?a.find(".ajx").ajx(O):$(".ajx").ajx(O)},{onState:!0}),$(document).ready(function(){function a(){var a=$(window).height()+150,b=a-parseInt($(".menu").css("height"));b/=2,$(".menu").css("top",b),$("#tabs>div").css("min-height",$(window).height()-225+"px")}$.ajaxSetup({cache:!1}),a(),$(window).resize(function(){a()}).scroll(function(){a()}),$(".menu>div").each(function(){$(this).mouseover(function(){$(this).children(".dropdown").stop().fadeIn(200)}).mouseout(function(){$(this).children(".dropdown").stop().fadeOut(200)})}),$("#tabs a").each(function(){if(/^#/.test($(this).attr("href"))){var a=location.pathname+$(this).attr("href");$(this).attr("href",a)}});var b=$("#tabs").tabs({beforeActivate:function(a,b){var c=b.newTab.attr("aria-controls");if(activeState=location.hash.replace(/\#/,""),/^\/?portal\/(.*)$/.test(b.newTab.find("a").attr("href"))){var d=b.newTab.find("a").attr("href");sls_pushState(null,b.newTab.find("a").text(),d.match(/^\/?portal\/(.*)#(.*)$/)[1]+"#"+c)}else if(activeState!=c){var e=b.newTab.find("a").attr("href");e=e.replace(/^\.?\/?/,""),e=e.replace(/\/$/,""),sls_pushState(null,b.newTab.find("a").text(),e+"#"+c)}},beforeLoad:function(b,c){return copiremenuehide(),a(),!c.tab.is(".loadContentAjax")&&($(c.panel[0]).sremovecontextmenu(),c.panel.html('<embed src="static/svg/logo-animation.svg" class="perload-svg" height="150" type="image/svg+xml" />'),c.jqXHR.fail(function(a){c.panel.text("قادر به نمایش این صفحه نمی باشیم.")}),void(c.panel.html=function(b){c.tab.addClass("loadContentAjax");var d=$("<span>"+b+"</span>").find("#global");d=d.text();try{d=$.parseJSON(d),c.tab.find("a").html(d.page_title),c.tab.find("a").persian_nu(),$("title").text(d.page_title),setTabLI(c.tab)}catch(e){d=!1}var f=$("<span>"+b+"</span>").find("#content");$(this).html(f),readyState($(this)),$(this).sroute(c.tab.find("a")[0].pathname),a()}))},activate:function(a,b){$("title").text(b.newTab.find("a").text())}});b.find(".ui-tabs-nav li").each(function(){setTabLI($(this))}),b.find(".ui-tabs-nav").sortable({distance:30,tolerance:"pointer",opacity:.7,sort:function(a,b){},placeholder:"x4",start:function(a,b){b.item.is(".ui-tabs-active")&&$(".x4").addClass("active")},stop:function(a,c){c.item.css("z-index",""),c.item.css("opacity",0),c.item.fadeTo("fast",1),b.tabs("refresh")}}),b.delegate("span.ui-icon-close","click",tabClose),$("#tabs>ul").droppable({accept:"a",drop:function(a,b){$(".deactive-tab").remove();var c=b.draggable.attr("href"),d=""!=b.draggable.text()?b.draggable.text():""!=b.draggable.attr("title")?b.draggable.attr("title"):"...";addTab(c,d)},over:function(a,b){addTab("#",b.helper.text(),!0)},out:function(){$(".deactive-tab").remove()}})}),window.onpopstate=function(a){var b,c=$("#tabs").tabs("option","active"),d=location.hash.replace(/\#/,"");if(d){var e=$("[aria-controls="+d+"]");b=e.length>0?e.index():0}else b=0;if($("#tabs").tabs({active:b}),b==c){href=location.href,href=href.replace(/\#(.*)$/,""),$("#tabs>ul>li").eq(b).find("a").attr("href",href);var e=$("#tabs>ul>li").eq(b).removeClass("loadContentAjax");$("#tabs").tabs("load",b)}},$(function(){var a=".filebox",b=".filebox-close",c=null,d=null;$.fn.filebox=function(){d=$(this),c=$(this).next(c),c.ajxCall(function(a){$(this).find("[name=base]").val(a.msg.base),$(this).fileboxClose(a)}),c.find(b).click(function(){$(this).parents("form").fileboxClose()}),d.find(a).fileboxShow()},$.fn.fileboxClose=function(a){var b=$(this).prev("form");a&&d.onFiles(a),$(this).hide(),b.fadeIn("fast")},$.fn.fileboxShow=function(){$(this).click(function(){var a=$(this).parents("form").next("form");$(this).parents("form").hide(),a.fadeIn("fast",function(){$(this).find("input[type='text']")[0].focus()})})},$.fn.onFiles=function(a){if("function"==typeof a)$(this).data("onFiles",a);else if($(this).data("onFiles")){var b=$(this).data("onFiles");b.call(this,a)}}}),ready(function(a){function b(){"single"==a.find(".marriage-form:checked").val()?a.find(".children-form").attr("disabled","disabled"):a.find(".children-form").removeAttr("disabled")}a=a?a:$("body"),a.find("a").not(".ui-tabs-anchor, .a-undefault").draggable({helper:"clone",snap:"#tabs>ul",distance:20}).bind("click",aClickTabs),a.find(".ajx").filebox(),a.find(".posts-form-options").onFiles(function(a){var b=a.msg.publicAddr?a.msg.publicAddr:a.msg.fileAddr+"."+a.msg.type;console.log(b),$(this).find(".img-preview").attr("src",b);var c=this;if($(this).find("#postImg").val(a.msg.id),$(this).find(".img-preview").data("Jcrop")){var d=$(this).find(".img-preview").data("Jcrop");d.destroy()}$(this).find(".img-preview").Jcrop({onChange:function(a){imageChangeSize.call(c,a)},onSelect:function(a){imageChangeSize.call(c,a)},aspectRatio:1,setSelect:[0,0,100,100],bgColor:"#00bbec"},function(){$(c).data("Jcrop",this)})}),a.find("#tabs, #tabs li a.ui-tabs-anchor").scroll(function(a){this.scrollLeft=9e3}),a.find("input[date=date]").each(function(){var a=this;$(this).persianDatepicker({formatDate:"YYYY-MM-DD",isRTL:!1,onSelect:function(){if(a.callBackDate){var b=a.callBackDate;b.call(a)}}})}),a.find("input[time=time]").clockpicker(),a.find("*:not(style)").persian_nu(),a.find("select:not([name=data_table_length], .notselect)").selectmenu(),a.find(".select-nationality").on("selectmenuchange",function(a,b){97!=b.item.value?$(this).parents("form").find(".select-city").attr("disabled","disabled").selectmenu("refresh"):$(this).parents("form").find(".select-city").removeAttr("disabled").selectmenu("refresh")}),b(),a.find(".marriage-form").change(b)},{onState:!0}),ready(function(){$("#perload-blockoff").remove()}),route(/absence\/status=classeslist\/classesid=\d+/,function(){function a(a){a=a.split("-");var b,c,d;return d=a[0],b=a[1],c=a[2],4==d.length&&(d=d),b<10&&(b="0"+b),c<10&&(c="0"+c),d+""+b+c}$(".absence-date-main")[0].callBackDate=function(){date=a($(this).val())},$("a.insertAbsenceApi",this).click(function(){return"undefined"==typeof date?(xhr_error("تاریخ انتخاب نشده است"),!1):(classification=$(this).attr("classification"),classesid=$(this).attr("classesid"),type=$(".absence-type",$(this).parents("tr:eq(0)")).val(),_self=$(this),$(_self).hasClass("insertAbsenceApi")?$.ajax({type:"POST",url:"absence/api/classification="+classification+"/date="+date+"/type="+type,success:function(a){a.fatal?(xhr_error(a.fatal[0]),$(_self).removeClass("icodadd insertAbsenceApi").addClass("icoredclose deleteAbsenceApi")):a.warn?xhr_warn(a.warn[0]):($(_self).removeClass("icodadd insertAbsenceApi").addClass("icoredclose deleteAbsenceApi"),xhr_true(a["true"][0]))}}):$(_self).hasClass("deleteAbsenceApi")&&$.ajax({type:"POST",url:"absence/apidelete/classification="+classification+"/date="+date,success:function(a){a.fatal?(xhr_error(a.fatal[0]),$(_self).removeClass("icoredclose deleteAbsenceApi").addClass("icodadd insertAbsenceApi")):a.warn?xhr_warn(a.warn[0]):($(_self).removeClass("icoredclose deleteAbsenceApi").addClass("icodadd insertAbsenceApi"),xhr_true(a["true"][0]))}}),!1)}),$("a.deleteAbsenceApi",this).click(function(){return"undefined"==typeof date?(xhr_error("تاریخ انتخاب نشده است"),!1):(classification=$(this).attr("classification"),classesid=$(this).attr("classesid"),_self=$(this),$.ajax({type:"POST",url:"absence/apidelete/classification="+classification+"/date="+date,success:function(a){a.fatal?xhr_error(a.fatal[0]):a.warn?xhr_warn(a.warn[0]):($(_self).removeClass("icodadd deleteAbsenceApi").addClass("icoredclose insertAbsenceApi"),xhr_true(a["true"][0]))}}),!1)})}),route(/certification\/status\=api/,function(){$(".set-date-print",this).click(function(){certification_api_change($(this).attr("certificationid"),"setdateprint"),$(this).addClass("delete-date-print"),$(this).removeClass("icocalendar set-date-print").css("cursor","default").html(persian_nu($(this).attr("dateNow")))}),$(".set-date-deliver",this).click(function(){certification_api_change($(this).attr("certificationid"),"setdatedeliver"),$(this).addClass("delete-date-deliver"),$(this).removeClass("icocalendar set-date-deliver").css("cursor","default").html(persian_nu($(this).attr("dateNow")))}),$(".delete-date-print",this).click(function(){certification_api_change($(this).attr("certificationid"),"deletedateprint"),$(this).removeClass("delete-date-print"),$(this).addClass("icocalendar set-date-print").css("cursor","pointer").html("")}),$(".delete-date-deliver",this).click(function(){certification_api_change($(this).attr("certificationid"),"deletedatedeliver"),$(this).removeClass("delete-date-deliver"),$(this).addClass("icocalendar set-date-deliver").css("cursor","pointer").html("")})}),route(/portal\/classes\/status=(add|edit)/,function(){$(".select-plan",this).combobox(),$(".select-place",this).combobox(),$("#teachername",this).sautocomplate()}),route(/classes\/status\=done\/classesid\=\d+/,function(){$(".classes-done",this).click(function(){xhr_true("لطفا کمی صبر کنید"),classesid=$(this).attr("classesid"),$.ajax({type:"POST",url:"classes/status=setdone/classesid="+classesid,success:function(a){xhr_result(a)}})})}),route(/classes\/status\=running\/classesid\=\d+/,function(){$(".classes-running",this).click(function(){xhr_true("لطفا کمی صبر کنید"),classesid=$(this).attr("classesid"),$.ajax({type:"POST",url:"classes/status=setrunning/classesid="+classesid,success:function(a){xhr_result(a)}})})}),route(/classes\/status\=move\/classesid\=\d+\/moveto\=\d+/,function(){$(".classes-move",this).click(function(){xhr_warn("لفطا صبر کنید"),oldclassesid=$(this).attr("oldclassesid"),newclasses=$(this).attr("newclasses"),$.ajax({type:"POST",url:"classes/status=setmove/classesid="+oldclassesid+"/moveto="+newclasses,success:function(a){xhr_result(a)}})})}),route(/classification\/status\=edit\/id\=\d+/,function(){function a(a,b,c,d,e,f){$.ajax({type:"POST",url:"classification/apiclassification/id="+a+"/date="+b+"/because="+c+"/usersid="+d+"/classesid="+e,success:function(a){xhr_result(a)}})}_self=$(this),$("button[value=edit]",this).click(function(){return usersid=$("#usersid",_self).val(),classesid=$("#classesid",_self).val(),id=$("#id",_self).val(),date_delete=$("#date_delete",_self).val(),because=$("#because",_self).val(),$.ajax({type:"POST",url:"classification/apiprice/usersid="+usersid+"/classesid="+classesid,success:function(b){price=b.msg.sum_price,price>0?(sumprice,$(".question",_self).css("display","inline-block"),$("#sumprice",_self).html(price),$(".yesprice",_self).click(function(){$.ajax({type:"POST",url:"classification/apipriceback/usersid="+usersid+"/classesid="+classesid,success:function(b){$(".question",_self).fadeOut(300),a(id,date_delete,because,usersid,classesid,_self)}})}),$(".noprice",_self).click(function(){$(".question",_self).fadeOut(300),a(id,date_delete,because,usersid,classesid,_self)})):a(id,date_delete,because,usersid,classesid,_self)}}),!1})}),route(/classification\/status\=api/,function(a){$("tbody>tr",this).attr("copier-context-subject","user")}),route(/course\/courseclasses\/status\=add/,function(){$(".courseclasses-item a",this).click(function(){return $(this).parents(".courseclasses-item").fadeOut(1e3),!1}),$("#course_id",this).combobox(),$("#course_id").combobox("destroy"),$("#course_id",this).combobox({change:function(a){item=a.item.option.value,$.ajax({type:"POST",url:"course/courseclasses/apilist/courseid="+item,success:function(a){courseclasses_list(a)}})}})}),route(/classes\/status\=api\/type\=courseclasses/,function(){$(".courseclasses-apiadd",this).click(function(){_self=$(this),course_id=$("body #course_id option:selected").attr("value"),classes_id=$(this).attr("id"),$.ajax({type:"POST",url:"course/courseclasses/apiadd/courseid="+course_id+"/classesid="+classes_id,success:function(a){_self.removeClass("icodadd courseclasses-apiadd").addClass("icodadddisable"),courseclasses_list(a)}})})}),route(/portal\/files.*type=files/,function(){function a(a,b){d(b);var e=$("#image-target"),f=this,f=f.files[0];if(f){var g=/image.*/;if(f.type.match(g)&&f.size<1e7){if(b)return void c();var h=new FileReader;h.onload=function(a){var b=new Image;b.setAttribute("id","image-target-img"),b.src=h.result,e.append(b),c()},h.readAsDataURL(f)}else{var i="";i=f.type.match(/^image/)?"pictures":f.type.match(/^audio/)?"sound":f.type.match(/^video/)?"media":"folder";var j=new Image;j.setAttribute("id","image-target-img"),j.setAttribute("src","static/svg/icons/"+i+".svg"),e.append(j),$("#image-target").show()}$("#file").hide()}}function b(a,b){$("#crop_size").val(b.x+" "+b.y+" "+b.w+" "+b.h+" "+a)}function c(){var a;$("#image-target").show();var c=$("#tag").val(),d=$("option[value="+c+"]"),e=$("#image-target-img"),d=$("option[value="+c+"]").attr("data-condition");if(d){var g=parseCondition(d);a=g.ratio?g.ratio:1}else a=1;fnChangeSize=b,e.width()>e.height()?e.width(500):e.height(500),fnChangeSize.bind(null,e.width(),e.height()),e.Jcrop({onChange:b.bind(null,e.width()),onSelect:b.bind(null,e.width()),aspectRatio:a,setSelect:[0,0,160,160],bgColor:"#00bbec"},function(){f=this})}function d(a){a||$("#image-target-img").remove(),f&&f.destroy()}function e(){d(),$("#image-target").hide(),$("#file").val(""),$("#file").show()}var f;$("#file_upload").ajxCall(e),$("#tag").selectmenu({change:function(b,c){a.call($("#file")[0],null,!0)}}),$("#type-combo").autocomplete({source:function(a,b){$.getJSON("person/api/search="+a.term,function(a){b(a.msg.list)})},minLength:2,select:function(a,b){$("#id").val(b.item.id)}}),$("#file").change(a),$("#remove").click(e)}),route(/portal\/files.*type=tag/,function(){$("input#width").parents(".form-element").hide(),$("input#ratio").parents(".form-element").hide(),$("#type",this).on("selectmenuchange",function(a,b){"image"==b.item.value?($("input#width").parents(".form-element").fadeIn("fast"),$("input#ratio").parents(".form-element").fadeIn("fast")):($("input#width").parents(".form-element").fadeOut("fast"),$("input#ratio").parents(".form-element").fadeOut("fast"))})}),route(/portal\/hefzlig/,function(){var a=this;$("#lig_id",this).combobox(),$("#hefz_team_id_1",this).combobox(),$("#hefz_team_id_2",this).combobox(),
$("#hefz_group_id",this).combobox(),$("#type",this).combobox(),$("#hefz_group",this).combobox().next("span").css("display","none"),$("label[for=hefz_group]").css("display","none"),$("#teachername",this).sautocomplate(),$(".delete-hefz-teams-users").click(function(){teamuserid=$(this).attr("teamuserid"),a=$(this),$.ajax({type:"POST",url:"hefzlig/teams/status=apidelete/teamuserid="+teamuserid,success:function(b){xhr_result(b),$(a).parents("tr").fadeOut()}})})}),route(/portal\/hefzlig\/teams/,function(){_self=$(this),$("#lig_id").combobox("destroy"),$("#lig_id",this).combobox({change:function(b){item=b.item.option.value,$.ajax({type:"POST",url:"hefzlig/groupapi/ligid="+item,success:function(b){console.log(b),$("#hefz_group_id",_self).combobox("destroy"),$("#hefz_group_id option").each(function(){$(this).remove()}),$("<option value='' disabled='disabled' selected='selected'>لطفا یکی از گزینه ها را انتخاب کنید</option>").appendTo($("#hefz_group_id"));for(a in b.msg.groupname)console.log(a),b.msg.groupname[a].id&&$("<option type='text' value='"+b.msg.groupname[a].id+"' id='"+b.msg.groupname[a].id+"' placeholder='"+b.msg.groupname[a].name+"'>"+b.msg.groupname[a].name+"</option>").appendTo($("#hefz_group_id"));$("#hefz_group_id",_self).combobox()}})}})}),route(/portal\/hefzlig\/race/,function(){_self=$(this),$("#lig_id").combobox("destroy"),$("#lig_id",this).combobox({change:function(b){item=b.item.option.value,$.ajax({type:"POST",url:"hefzlig/ligsapi/id="+item,success:function(b){none_display_hefz_group(_self),$("#hefz_team_id_1",_self).combobox("destroy"),$("#hefz_team_id_2",_self).combobox("destroy"),$("#hefz_team_id_1 option").each(function(){$(this).remove()}),$("#hefz_team_id_2 option").each(function(){$(this).remove()}),$("<option value='' disabled='disabled' selected='selected'>لطفا یکی از گزینه ها را انتخاب کنید</option>").appendTo($("#hefz_team_id_1")),$("<option value='' disabled='disabled' selected='selected'>لطفا یکی از گزینه ها را انتخاب کنید</option>").appendTo($("#hefz_team_id_2"));for(a in b.msg.teams)console.log(a),b.msg.teams[a].id&&($("<option type='text' value='"+b.msg.teams[a].id+"' id='"+b.msg.teams[a].id+"' placeholder='"+b.msg.teams[a].name+"'>"+b.msg.teams[a].name+"</option>").appendTo($("#hefz_team_id_1")),$("<option type='text' value='"+b.msg.teams[a].id+"' id='"+b.msg.teams[a].id+"' placeholder='"+b.msg.teams[a].name+"'>"+b.msg.teams[a].name+"</option>").appendTo($("#hefz_team_id_2")));$("#hefz_team_id_1",_self).combobox(),$("#hefz_team_id_2",_self).combobox()}})}})}),route(/portal\/hefzlig\/race\/status\=delete/,function(){var a=this;$(".race-delete").click(function(){raceid=$(this).attr("raceid"),a=$(this),$.ajax({type:"POST",url:"hefzlig/race/status=setdelete/id="+raceid,success:function(a){xhr_result(a)}})})}),route(/hefzlig\/race\/status\=racing/,function(){xbody=$(this),$("#save-sort").click(function(){sort=new Array,i=0,$("input[type=checkbox]",xbody).each(function(){raceid=$(this).attr("raceid"),teamid=$(this).attr("teamid"),teamusersid=$(this).attr("teamusersid"),sort[i]=[raceid,teamid,teamusersid],i++}),console.log(sort),$.ajax({type:"POST",url:"hefzlig/race/status=setsettings/raceid="+raceid+"/type=sort",data:{sort:sort},success:function(a){xhr_result(a)}})}),$(".settings span").each(function(){"save-sort"!=$(this).attr("id")&&$(this).click(function(){type=$(this).attr("id"),"telavat1"==type?($("#telavat2").removeClass("red"),$("#telavat1").addClass("red")):($("#telavat1").removeClass("red"),$("#telavat2").addClass("red")),raceid=$(this).attr("raceid"),$.ajax({type:"POST",url:"hefzlig/race/status=setsettings/raceid="+raceid+"/type="+type,success:function(a){xhr_result(a)}})})}),$(".hefz-race-presence").click(function(){_self=$(this),raceid=$(this).attr("raceid"),teamid=$(this).attr("teamid"),teamusersid=$(this).attr("teamusersid"),$(this).prop("checked")?(checked="true",$(_self).parents("tr").removeClass("rt-disable")):(checked="false",$(_self).parents("tr").addClass("rt-disable")),$.ajax({type:"POST",url:"hefzlig/race/status=setpresence/raceid="+raceid+"/teamid="+teamid+"/teamusersid="+teamusersid+"/checked="+checked,success:function(a){xhr_result(a),hefz_result(raceid)}})}),$(".race-manfi").click(function(){_self=$(this),teamid=$(this).attr("teamid"),raceid=$(this).attr("raceid"),type=$(this).attr("type"),$.ajax({type:"POST",url:"hefzlig/race/status=raceapi/teamid="+teamid+"/raceid="+raceid+"/type="+type,success:function(a){$(_self).removeAttr("disabled"),a.fatal?xhr_result(a):a.warn?xhr_result(a):hefz_result(raceid,$(_self))}})}),$(".race-mark",this).change(function(){return $(this).attr("disabled","disabled"),_self=$(this),teamuserid=$(this).attr("teamusersid"),raceid=$(this).attr("raceid"),value=$(this).val(),type=$(this).attr("name"),""==value?void $(this).removeAttr("disabled"):(_true='<span class="icolikes" style="margin-right: 5px;padding: 0;display: inline-block;"></span>',$(_self).next("span").remove(),url="hefzlig/race/status=raceapi/teamuserid="+teamuserid+"/raceid="+raceid+"/value="+value+"/type="+type,void $.ajax({type:"POST",url:url,success:function(a){$(_self).removeAttr("disabled"),a.fatal?xhr_result(a):a.warn?xhr_result(a):($(_true).insertAfter(_self),hefz_result(raceid,$(_self)))}}))})}),route(/users\/status\=api/,function(){$(".add-hefz-teams-users",this).click(function(){teamid=$(this).attr("hefzteamsid"),usersid=$(this).attr("usersid"),$.ajax({type:"POST",url:"hefzlig/teams/status=apiadd/usersid="+usersid+"/teamid="+teamid,success:function(a){xhr_result(a)}})})}),route(/listabsence\/status\=xapi\/usersid\=\d/,function(){$(".absenceDelete").click(function(){classification=$(this).attr("classificationid"),date=$(this).attr("date"),_self=$(this),$.ajax({type:"POST",url:"absence/apidelete/classification="+classification+"/date="+date,success:function(a){a.fatal?xhr_error(a.fatal[0]):a.warn?xhr_warn(a.warn[0]):($(_self).parents("tr").fadeOut(),xhr_true(a["true"][0]))}})})}),route(/users\/learn\/id\=\d+/,function(){$(".insert-certification").click(function(){return classificationid=$(this).attr("classificationid"),$.ajax({type:"POST",url:"certification/status=insertapi/classificationid="+classificationid,success:function(a){xhr_result(a)}}),!1})}),route(/permission\/status\=api/,function(){$(".deletepermission",this).click(function(){id=$(this).attr("value"),_self=$(this),$.ajax({type:"POST",url:"permission/apidelete/id="+id,success:function(a){xhr_true("سطح دسترسی حذف شد"),$(_self).parents("tr").fadeOut()}})})}),route(/permission\/status\=add/,function(){$(".select-branch",this).combobox(),$(".showbranch",this).click(function(){return _self=this,username=$(".username").val(),""!=username&&($("#branch_id").combobox(),$("#branch_id").combobox("destroy"),void $("#branch_id").combobox({create:function(a){$.ajax({type:"POST",url:"permission/apishowbranch/username="+username,success:function(a){branch_list(a),$("#branch_id").combobox()}})}}))})}),route(/portal\/(person|teacher)\/extera\/status\=(add|edit)\//,function(){$("#from",this).sautocomplate()}),route(/portal\/person\/status=(add|edit)/,function(){var a=this;$("#from",this).sautocomplate();var b=function(b){97!=b?($("#from",a).next().attr("disabled","disabled"),$("#pasport_date,label[for='pasport_date']").fadeIn()):($("#from",a).next().removeAttr("disabled"),$("#pasport_date,label[for='pasport_date']").fadeOut())},c={change:function(a){b(a.item.option.value)},create:function(){b(this.value)}};$("#nationality",this).combobox(c),$("#education_id",this).combobox(),$("#education_howzah_id",this).combobox()}),route(/portal\/person\/status=edit/,function(){$(".ajx",this).ajxOptions({reset:!1})}),route("*",function(){$(".slider-number").sslider()}),route(/plan\/section/,function(){$("#plan_id",this).combobox()}),route(/presence\/classesid\=\d+/,function(){$("#presence",this).keyup(function(a){username=$("#presence").val(),classesid=$(this).attr("classesid"),13==a.keyCode&&$.ajax({type:"POST",url:"presence/apiadd/classesid="+classesid+"/username="+username,success:function(a){xhr_result(a)}})}),$(".presence-classes",this).click(function(){classesid=$(this).attr("classesid"),$.ajax({type:"POST",url:"presence/apiclasses/classesid="+classesid,success:function(a){xhr_result(a)}})})}),route(/price/,function(){$("#users_id",this).sautocomplate(),$("#title,#plan_id",this).combobox()}),route(/price\/status\=(add|edit)/,function(){function a(a){return a.toString().replace(/,/,"").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}$("#value").val(a($("#value").val())),$("#value").keyup(function(b){_val=$(this).val().replace(/(\,)/,""),$(this).val(""),$(this).val(a(_val))})}),route(/price\/status\=add\/usersid\=\d+/,function(){_self=$(this),$("#plan_id",this).combobox("destroy"),$("#plan_id",this).combobox({change:function(a){item=a.item.option.value,$.ajax({type:"POST",url:"plan/api/id="+item,success:function(a){$("#value",_self).val(a.msg.price)}})}}),$("#common",this).click(function(){$("#plan_id,label[for=plan_id]",_self).fadeOut(),$("#plan_id",_self).next().fadeOut(),$("#value").val("")}),$("#plan",_self).click(function(){$("label[for=plan_id]",_self).fadeIn(),$("#plan_id",_self).next().fadeIn()}),$("#rule",_self).click(function(){var a=$("#card",_self).val(),b=$("#transactions",_self).val();0!==a&&0!==b&&($("#card",_self).val("000"),$("#transactions",_self).val("000"))})}),function(){function a(a){return a=parseInt(a),d.indexOf(a)!==-1?(delete d[d.indexOf(a)],!1):(d.push(a),!0)}function b(){return d}function c(){d=Array()}var d=Array();addToList=a,returnList=b,list_clear=c}(),route(/report\/classes/,function(){function a(){index=$(".list",this).attr("classesid"),check=addToList(index),check?$("input",this).attr("checked","checked"):$("input",this).removeAttr("checked")}for(_list=returnList(),i=0;i<_list.length;i++)_list[i]&&$(".list[classesid="+_list[i]+"]",this).attr("checked","checked");$("tbody>tr",this).click(a),url_="person",$("#lists").combobox(),$("#lists",this).combobox({change:function(a){url_=a.item.option.value,$(".report-link").fadeOut()}}),$(".start-reports",this).click(function(){var a=returnList(),b=Array();for(i=0;i<a.length;i++)a[i]&&b.push(a[i]);newlist=b.join(","),"activeclasses"==url_||"planstatusactive"==url_||"personactive"==url_||"activeclasseslist"==url_?$(".report-link").fadeIn().attr("href","report/classes/type="+url_):$(".report-link").fadeIn().attr("href","report/classes/type="+url_+"/classesid="+newlist)})}),route(/report\/plan/,function(){}),route(/report\/status\=(add|edit)/,function(){$("#tables",this).combobox()}),route(/report/,function(){$("#lists",this).combobox()}),route(/report\//,function(){$("#report_form").submit(function(){var a=mkData.call(this),b=location.pathname.replace(/\/$/,"")+"/"+a.lists;for(i=0;i<a.names.length;i++)b+="/"+a.names[i]+"="+a.values[i];return location.href=b,!1})}),route(/classification\/returnclasses\/id\=\d+/,function(){$(".returnclasses",this).click(function(){classesid=$(this).attr("classesid"),usersid=$(this).attr("usersid"),$.ajax({type:"POST",url:"classification/api/usersid="+usersid+"/classesid="+classesid+"/type=returnclasses",success:function(a){xhr_result(a)}})})}),route(/score/,function(){$("#plan_id",this).combobox()}),route(/score\/classes\/status=apilist\/classesid=\d+\/scoretypeid=\d+/,function(){$(".score-retest",this).click(function(){$("input[classificationid="+$(this).attr("classificationid")+"]").attr("retest")?$("input[classificationid="+$(this).attr("classificationid")+"]").removeAttr("retest"):$("input[classificationid="+$(this).attr("classificationid")+"]").attr("retest","retest")}),_warn='<span class="status-warn" style="background: #FFECB3;\tborder: 1px solid #FFD54F;\tpadding: 3px 10px;\tmargin-right: 5px;\tfont-size: 12px;\tdisplay: inline-block;">تاریخ ثبت نشده است.</span>',_fatal='<span class="status-fatal" style="background: #FFCDD2;\tborder: 1px solid #E57373;\tpadding: 3px 10px;\tmargin-right: 5px;\tfont-size: 12px;\tdisplay: inline-block;">تاریخ ثبت نشده است.</span>',_true='<span class="icolikes" style="margin-right: 5px;padding: 0;display: inline-block;"></span>',$(".score-mark",this).change(function(){return $(this).attr("disabled","disabled"),classificationid=$(this).attr("classificationid"),scoretypeid=$(this).attr("scoretypeid"),value=$(this).val(),""==value?(xhr_error("امتیاز را وارد کنید"),void $(this).removeAttr("disabled")):(_self=$(this),$(this).attr("retest")?url="score/api/classificationid="+classificationid+"/scoretypeid="+scoretypeid+"/value="+value+"/retest=true":url="score/api/classificationid="+classificationid+"/scoretypeid="+scoretypeid+"/value="+value+"/retest=false",$(_self).next("span").remove(),$(_self).attr("disabled","disabled"),$.ajax({type:"POST",url:url,success:function(a){$(_self).removeAttr("disabled"),a.fatal?$(_fatal).html(a.fatal[0]).insertAfter(_self):a.warn?$(_warn).html(a.warn[0]).insertAfter(_self):$(_true).insertAfter(_self)}}),$(this).removeAttr("disabled"),!1)})}),route(/score\/calculation\/status\=(add|edit)/,function(){$("#plan_id").combobox("destroy"),$("#plan_id",this).combobox({change:function(b){item=b.item.option.value,$.ajax({type:"POST",url:"score/type/api/id="+item,success:function(b){$("#list").html(""),$("#list").val("");for(a in b.msg)b.msg[a].title&&$("<a style='cursor: pointer' onclick='insert_(this);'>"+b.msg[a].title+"</a><br>").appendTo("#list")}})}})}),route(/users\/status=api/,function(a){$("tbody>tr",this).attr("copier-context-subject","user")}),route(/classification\/class\/classesid\=\d+/,function(){var a;a="#document"==this.nodeName?$("#tabs>div").eq(0):$(this),a.scontextmenu({user:{click:function(){xhr_true("لطفا کمی صبر کنید...");var a=$(this).attr("id"),b=$("#tabs>ul>li[aria-controls='"+a+"'] a"),c=b.attr("href"),d=arguments[1][9],e=(arguments[1][0]+" "+arguments[1][1],b.text(),c.match(/classesid=(\d+)#?.*$/)[1]),f="classification/api/usersid="+d+"/classesid="+e+"/type=add";b.removeClass("copier-true").removeClass("copier-error").addClass("copier-load"),$.ajax({type:"POST",url:f,success:function(a){xhr_result(a)}})},title:function(){var a=$(this).attr("id"),b=$("#tabs>ul>li[aria-controls='"+a+"'] a");return"ثبت در "+b.text()}}})}),route(/branch\/status\=change\/usersid\=\d+/,function(){$(".branch-change",this).click(function(){id=$(this).attr("usersbranchid"),type=$(this).attr("type"),users_branch_change(type,id)})});
//# sourceMappingURL=banoo.min.js.map